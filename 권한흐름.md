í˜„ì¬ DBì—ëŠ” USERì™€ ADMINì´ ê·¸ëŒ€ë¡œ ì €ì¥ë˜ì§€ë§Œ,
Spring Security ë‚´ë¶€ì ìœ¼ë¡œëŠ” ROLE_USER, ROLE_ADMIN í˜•ì‹ìœ¼ë¡œ ê´€ë¦¬ë¼.

ğŸ“Œ DB â†’ Spring Security ê¶Œí•œ íë¦„
ğŸ”¹ íšŒì›ê°€ì… ì‹œ member_role ì €ì¥

DBì— USER ë˜ëŠ” ADMINì´ ê·¸ëŒ€ë¡œ ì €ì¥ë¨
ğŸ”¹ ë¡œê·¸ì¸ í›„ member_roleì„ Security Contextì— ì €ì¥

ë¡œê·¸ì¸ ì‹œ, DBì—ì„œ member_roleì„ ê°€ì ¸ì™€ì„œ ROLE_ì„ ìë™ìœ¼ë¡œ ë¶™ì—¬ì¤Œ
USER â†’ ROLE_USER
ADMIN â†’ ROLE_ADMIN
Spring SecurityëŠ” ì´ ì—­í• ì„ ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼ì„ ì œì–´í•¨
ğŸ”¹ Spring Securityì˜ hasAuthority("ROLE_ADMIN") ì²´í¬

ROLE_ì´ ë¶™ì€ ê¶Œí•œì„ ë¹„êµí•˜ì—¬ ì ‘ê·¼ì„ í—ˆìš© ë˜ëŠ” ì°¨ë‹¨í•¨
ì˜ˆë¥¼ ë“¤ì–´, hasAuthority("ROLE_ADMIN")ì´ë©´ ADMIN ê³„ì •ë§Œ ì ‘ê·¼ ê°€ëŠ¥
ğŸ“Œ í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ member_role íë¦„ í™•ì¸
1ï¸âƒ£ DBì— ì €ì¥ëœ ë°ì´í„° (MySQL)

sql
ë³µì‚¬
í¸ì§‘
SELECT email, member_role FROM Member;
plaintext
ë³µì‚¬
í¸ì§‘
email                | member_role
---------------------|------------
test1@example.com   | USER
admin@example.com   | ADMIN
2ï¸âƒ£ ë¡œê·¸ì¸ ì‹œ authenticate() ë©”ì„œë“œ (Spring Security ì ìš©)

MemberService.java
java
ë³µì‚¬
í¸ì§‘
public String authenticate(String email, String password) {
    Member member = memberMapper.getMemberByEmail(email);

    if (member == null) {
        throw new IllegalArgumentException("í•´ë‹¹ ì´ë©”ì¼ë¡œ ê°€ì…ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.");
    }

    // ğŸ”¹ Spring SecurityëŠ” "ROLE_"ì„ ìë™ìœ¼ë¡œ ë¶™ì—¬ì„œ ì²˜ë¦¬
    MemberRole role = (member.getMemberRole() != null) ? member.getMemberRole() : MemberRole.USER;

    return jwtTokenProvider.createToken(email, role.name());  // âœ… "USER" or "ADMIN" ê·¸ëŒ€ë¡œ ì‚¬ìš©
}
ğŸ”¹ role.name()ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, Spring Securityê°€ ë‚´ë¶€ì ìœ¼ë¡œ ROLE_ì„ ì¶”ê°€í•´ì„œ ê´€ë¦¬
ğŸ“Œ SecurityConfigì—ì„œ ROLE_ì´ ìë™ìœ¼ë¡œ ë¶™ëŠ” ì´ìœ 
SecurityConfig.java

java
ë³µì‚¬
í¸ì§‘
private void configureAuthorization(AuthorizeHttpRequestsConfigurer<HttpSecurity>.AuthorizationManagerRequestMatcherRegistry auth) {
    auth
        .requestMatchers("/admin/**").hasAuthority("ROLE_ADMIN")  // âœ… "ROLE_" ë¶™ì—¬ì„œ ê¶Œí•œ ê²€ì‚¬
        .requestMatchers("/api/member/auth/**").hasAnyAuthority("ROLE_ADMIN", "ROLE_USER")
        .requestMatchers("/api/logout").authenticated()
        .anyRequest().permitAll();
}
ğŸ”¹ hasAuthority("ROLE_ADMIN")ì„ ì‚¬ìš©í•˜ë©´ Spring Securityê°€ ë‚´ë¶€ì ìœ¼ë¡œ ROLE_ì„ ë¶™ì—¬ì„œ ê²€ì‚¬
ğŸ”¹ ì¦‰, DBì—ëŠ” "ADMIN"ìœ¼ë¡œ ì €ì¥ë˜ì§€ë§Œ,
Securityì—ì„œëŠ” "ROLE_ADMIN"ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬
ğŸ“Œ ê²°ë¡ 
âœ… DBì— "USER" ë˜ëŠ” "ADMIN"ì´ ì €ì¥ë¨
âœ… ë¡œê·¸ì¸í•˜ë©´ Spring Securityê°€ "ROLE_USER", "ROLE_ADMIN"ìœ¼ë¡œ ë³€í™˜
âœ… SecurityConfigì—ì„œ hasAuthority("ROLE_ADMIN")ë¡œ ì ‘ê·¼ ê¶Œí•œì„ í™•ì¸
âœ… JWT í† í°ì—ëŠ” "USER" ë˜ëŠ” "ADMIN"ì´ ë“¤ì–´ê°€ì§€ë§Œ, Securityì—ì„œëŠ” "ROLE_"ì´ ìë™ìœ¼ë¡œ ë¶™ì–´ì„œ ê´€ë¦¬ë¨
ğŸ“Œ í•´ê²° ë°©ë²•
ğŸ’¡ ê·¸ëŸ¼ ROLE_ì´ ë¶™ì§€ ì•Šê²Œ í•˜ê³  ì‹¶ë‹¤ë©´?

SecurityConfigì—ì„œ hasAuthority("ADMIN")ë¡œ ë°”ê¾¸ë©´ ë¨!
java
ë³µì‚¬
í¸ì§‘
private void configureAuthorization(AuthorizeHttpRequestsConfigurer<HttpSecurity>.AuthorizationManagerRequestMatcherRegistry auth) {
    auth
        .requestMatchers("/admin/**").hasAuthority("ADMIN")  // âœ… "ROLE_" ì œê±°
        .requestMatchers("/api/member/auth/**").hasAnyAuthority("ADMIN", "USER")
        .requestMatchers("/api/logout").authenticated()
        .anyRequest().permitAll();
}
ì´ë ‡ê²Œ í•˜ë©´, Securityì—ì„œë„ DBì™€ ë™ì¼í•œ USER, ADMINì„ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•´!

ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„
ğŸ”¹ ROLE_ì„ ìœ ì§€í• ì§€, DBì™€ ë™ì¼í•˜ê²Œ USER, ADMINìœ¼ë¡œ í†µì¼í• ì§€ ê²°ì •í•˜ì!
í˜„ì¬ Securityì—ì„œ ROLE_ì„ ìë™ìœ¼ë¡œ ë¶™ì´ê³  ìˆìœ¼ë‹ˆê¹Œ,
í†µì¼í•˜ë ¤ë©´ Security ì„¤ì •ì„ ë³€ê²½í•˜ë©´ ë¼! ğŸš€